# requirements.txt
# 因果推論用の環境を安定させるために、
# ylearn の C拡張や内部依存と ABI / API が噛み合うバージョン帯に固定している。
# ylearn 本体は PyPI 版ではなく、GitHub 版を直接インストールする。

# ------------------------------------------------------------
# 数値計算コア
# ------------------------------------------------------------
# ylearn の C拡張は NumPy 1.x 系に対してビルドされている想定が強く、
# NumPy 2.x 系では
#   ValueError: numpy.dtype size changed, may indicate binary incompatibility
# のようなエラーを起こしやすい。
# そのため、1.21〜1.22 あたりの範囲に明示的に固定している。
numpy>=1.21,<1.23

# SciPy は NumPy 1.21–1.22 と互換性のある 1.x 系に固定。
# 線形代数や統計関数を使う際に NumPy と ABI が揃うようにする。
scipy>=1.10,<2.0

# pandas は 1.x 系に固定。
# ylearn が内部で pandas.DataFrame を前提としているため、
# 2.x 系での非互換変更の影響を避ける。
pandas>=1.5,<2.0

# ------------------------------------------------------------
# 機械学習系ライブラリ
# ------------------------------------------------------------
# ylearn は scikit-learn の推定器（決定木、ランダムフォレストなど）を
# 内部でラップして用いるため、互換性のある 1.x 系に固定。
# 1.3 系は NumPy 1.21–1.22 とも相性がよい。
scikit-learn>=1.3,<1.4

# ------------------------------------------------------------
# 可視化（主に因果グラフや結果の可視化用）
# ------------------------------------------------------------
# matplotlib 導入時に NumPy 2.x が一緒に入らないよう、
# 3.x 系の中でバージョンを固定。
matplotlib>=3.7,<4.0

# ------------------------------------------------------------
# 因果推論ライブラリ本体（GitHub 版を直接インストール）
# ------------------------------------------------------------
# PyPI の ylearn ではメタデータ・ビルド周りで問題が出やすいため、
# 公式 GitHub リポジトリから直接インストールする。
# この行を requirements.txt に書いておけば、
#   pip install -r requirements.txt
# で GitHub 版 ylearn が入る。
git+https://github.com/DataCanvasIO/YLearn.git

# ------------------------------------------------------------
# グラフ構造（DAG）の表現と操作
# ------------------------------------------------------------
# ylearn の CausalGraph は内部で networkx を利用している。
# ただし ylearn のコードは networkx 2.x 系の API
# （例: nx.to_numpy_matrix）を前提としており、
# 3.x 系では AttributeError になる。
# そのため、2.x 系（2.6〜2.8 など）に明示的に固定する。
networkx>=2.6,<3.0